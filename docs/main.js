parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"or4r":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e="Expected a function",n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,f=/^0o[0-7]+$/i,c=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,v=a||s||Function("return this")(),l=Object.prototype,p=l.toString,b=Math.max,m=Math.min,y=function(){return v.Date.now()};function d(t,n,r){var i,o,u,f,c,a,s=0,v=!1,l=!1,p=!0;if("function"!=typeof t)throw new TypeError(e);function d(e){var n=i,r=o;return i=o=void 0,s=e,f=t.apply(r,n)}function g(t){var e=t-a;return void 0===a||e>=n||e<0||l&&t-s>=u}function O(){var t=y();if(g(t))return x(t);c=setTimeout(O,function(t){var e=n-(t-a);return l?m(e,u-(t-s)):e}(t))}function x(t){return c=void 0,p&&i?d(t):(i=o=void 0,f)}function T(){var t=y(),e=g(t);if(i=arguments,o=this,a=t,e){if(void 0===c)return function(t){return s=t,c=setTimeout(O,n),v?d(t):f}(a);if(l)return c=setTimeout(O,n),d(a)}return void 0===c&&(c=setTimeout(O,n)),f}return n=h(n)||0,j(r)&&(v=!!r.leading,u=(l="maxWait"in r)?b(h(r.maxWait)||0,n):u,p="trailing"in r?!!r.trailing:p),T.cancel=function(){void 0!==c&&clearTimeout(c),s=0,i=a=o=c=void 0},T.flush=function(){return void 0===c?f:x(y())},T}function j(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function O(t){return"symbol"==typeof t||g(t)&&p.call(t)==r}function h(t){if("number"==typeof t)return t;if(O(t))return n;if(j(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=j(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=u.test(t);return r||f.test(t)?c(t.slice(2),r?2:8):o.test(t)?n:+t}module.exports=d;
},{}],"WEtf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}},e=r;exports.default=e;
},{}],"i2Ry":[function(require,module,exports) {
"use strict";function e(e,t){return e.date-t.date}function t(e,t){return e=e.values.length,(t=t.values.length)-e}function r(e,t){return e=e.key.split("-"),t=t.key.split("-"),new Date(e[0],e[1],1)-new Date(t[0],t[1],1)}function n(e,t){return e=e.yearMonth.split("-"),t=t.yearMonth.split("-"),new Date(e[0],e[1],1)-new Date(t[0],t[1],1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s={sortNumberStories:t,sortDatesKey:r,sortDatesYearMonth:n,sortDates:e};exports.default=s;
},{}],"TAPd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,d,n,l,a,s,i,c=o(require("./sorting"));function o(e){return e&&e.__esModule?e:{default:e}}function r(e){for(var t=1;t<arguments.length;t++){var d=null!=arguments[t]?arguments[t]:{},n=Object.keys(d);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(d).filter(function(e){return Object.getOwnPropertyDescriptor(d,e).enumerable}))),n.forEach(function(t){u(e,t,d[t])})}return e}function u(e,t,d){return t in e?Object.defineProperty(e,t,{value:d,enumerable:!0,configurable:!0,writable:!0}):e[t]=d,e}function h(e,t){return m(e)||p(e,t)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(e,t){var d=[],n=!0,l=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(d.push(s.value),!t||d.length!==t);n=!0);}catch(c){l=!0,a=c}finally{try{n||null==i.return||i.return()}finally{if(l)throw a}}return d}function m(e){if(Array.isArray(e))return e}var y,g,v,b,w,_,x,k,A,P,D,O,S,T,Y,j,M,E,C,H,I,N,z,L,W,q,B,F,U,X=d3.timeParse("%Y_%m_%d"),G=d3.timeParse("%Y/%m/%d"),J={left:10,right:10,top:10,bottom:10},K=20,Q=5,R="#559DB9",V="#E17D7F",Z=d3.select(".scroll-hint"),$=0;function ee(){A.on("click",ae),P.on("click",ae),D.on("click",le)}function te(e,t,d){if(d3.event.stopPropagation(),y>600){var n=h(d3.mouse(this),2),l=n[0],a=n[1],s="article"===e.data.type?"<p class='sci-title'>".concat(e.data.hed_main,"</p><p class='sci-body'>").concat(e.data.abstract.slice(0,200),"...</p>"):"<p class='sci-title'>".concat(e.data.hed_main,"</p><p class='sci-author'>").concat(e.data.author,"</p><p class='sci-body'>").concat(e.data.abstract.slice(0,200),"...</p>");d3.selectAll(".paper").classed("faded",!0),d3.selectAll(".article").classed("faded",!0),d3.select(this).classed("highlight",!0),d3.select(this).on("click",function(e){"article"===e.data.type?window.open(e.data.web_url):window.open(e.data.link)}),z.st("opacity",0),S.classed("hidden",!1).st("left",l+20).st("top",a).st("max-width",function(){return y>600?y/4:y/3}).html(s)}else{"article"===e.data.type?(T.text(e.data.hed_main),Y.classed("hidden",!0),j.text("".concat(e.data.abstract.slice(0,200),"...")),M.on("click",function(){window.open(e.data.web_url)})):(T.text(e.data.hed_main),Y.text(e.data.author),j.text("".concat(e.data.abstract.slice(0,200),"...")),M.on("click",function(){window.open(e.data.link)}));var i=h(d3.mouse(this),2),c=(i[0],i[1]);d3.selectAll(".paper").classed("faded",!0),d3.selectAll(".article").classed("faded",!0),d3.select(this).classed("highlight",!0),S.classed("hidden",!1).st("left",.1*y).st("top",c).st("max-width",function(){return.8*y}).on("click",de)}}function de(e){S.classed("hidden",!0),d3.selectAll(".paper").classed("faded",!1),d3.selectAll(".article").classed("faded",!1),d3.selectAll(".paper").classed("highlight",!1),d3.selectAll(".article").classed("highlight",!1),z.st("opacity",1)}function ne(e){window.scroll({behavior:"smooth",left:0,top:e.offsetTop})}function le(){1===$&&(x.classed("hidden",!1),k.classed("hidden",!1),x.classed("slide",!1),k.classed("slide",!1),d3.select(".arrow-cover").classed("hidden",!1),d3.select(".arrow-back-to-intro").classed("hidden",!0),d3.selectAll(".timeline-intro").classed("hidden",!0),d3.select(".intro").classed("hidden",!1),d3.select(".cover-container").classed("hidden",!1),$-=1,P.classed("hidden",!0),D.classed("hidden",!0)),2===$&&(d3.select(".timeline-svg").classed("hidden",!0),d3.selectAll(".timeline-intro").classed("hidden",!0),d3.selectAll(".slide-1").classed("hidden",!1),$-=1,P.classed("hidden",!1),D.classed("hidden",!1)),3===$&&(d3.select(".timeline-svg").classed("hidden",!0),d3.selectAll(".timeline-intro").classed("hidden",!0),d3.selectAll(".slide-2").classed("hidden",!1),$-=1,P.classed("hidden",!1),D.classed("hidden",!1)),4===$&&(w.classed("hidden",!0),_.classed("hidden",!0),C.classed("hidden",!0),d3.select(".timeline-svg").classed("hidden",!0),d3.selectAll(".timeline-intro").classed("hidden",!0),d3.selectAll(".slide-3").classed("hidden",!1),d3.select("div.intro").classed("hidden",!1),$-=1,P.classed("hidden",!1),D.classed("hidden",!1))}function ae(){0===$?(x.classed("slide",!0),k.classed("slide",!0),d3.select(".arrow-cover").classed("hidden",!0),d3.selectAll("end").classed("hidden",!0),d3.select(".slide-1").classed("hidden",!1),$+=1,C.classed("hidden",!0),w.classed("hidden",!0),P.classed("hidden",!1),D.classed("hidden",!1),setTimeout(function(){x.classed("hidden",!0),k.classed("hidden",!0)},500)):1===$?(d3.select(".cover-container").classed("hidden",!0),d3.selectAll("end").classed("hidden",!0),d3.selectAll(".timeline-intro").classed("hidden",!0),d3.select(".slide-2").classed("hidden",!1),$+=1,C.classed("hidden",!0),w.classed("hidden",!0),P.classed("hidden",!1),D.classed("hidden",!1)):2===$?(d3.select(".cover-container").classed("hidden",!0),d3.selectAll("end").classed("hidden",!0),d3.selectAll(".timeline-intro").classed("hidden",!0),d3.select(".slide-3").classed("hidden",!1),$+=1,C.classed("hidden",!0),w.classed("hidden",!0),P.classed("hidden",!1),D.classed("hidden",!1)):(_.classed("hidden",!1),d3.select(".cover-container").classed("hidden",!0),d3.selectAll("end").classed("hidden",!1),C.classed("hidden",!1),w.classed("hidden",!1),d3.select(".timeline-svg").st("display","block"),d3.selectAll(".timeline-intro").classed("hidden",!0),P.classed("hidden",!0),D.classed("hidden",!1),d3.select("div.intro").classed("hidden",!0),$+=1,d3.select("body").st("overflow","auto"))}function se(){O=d3.forceSimulation(s).force("x",d3.forceX(function(e){return e.type,y/2})).force("y",d3.forceY(function(e){return v(e.date)}).strength(1)).force("collide",d3.forceCollide(function(e){return"article"===e.type?5:20})).stop();for(var e=0;e<220;++e)O.tick()}function ie(e){var t=d3.select("body").node().offsetWidth;var d=e.filter(function(e){return e.annotation}).map(function(e,d){var n,l={};return l.className="anno-".concat(e.type),l.note={label:e.annotation,title:e.anno_title,bgPadding:{top:15,left:10,right:20,bottom:10},wrap:t>600?t/5:t/4},l.data={date:e.date,x:e.x,r:"article"===e.type?Q:K},l.dx=function(e,d){if(t>600)return e%2?-200:100;if(e%2)return-(d-.4*t);return.61*t-d}(d,e.x),l.dy="The end: no autism/vaccine link"===(n=e.anno_title)?0:"In America..."===n?200:"Study retracted"===n?100:"Measles in US"===n?-100:"Presidential debates"===n?200:"Political manipulation"===n?100:0,l}),n={className:"anno-intro"};return n.note={label:"Here’s a timeline of New York Times articles that mention a relationship between vaccines and autism in the same story in the 1990s.",title:"Historically...",bgPadding:{top:15,left:10,right:10,bottom:10},wrap:t>600?t/5:t/3.3},n.data={date:new Date("1990-06-01"),x:y/2,r:0},n.dx=-50,n.dy=0,d.push(n),d}function ce(){var e=d3.annotationCallout,t=(d3.timeParse("%d-%b-%y"),d3.annotation().editMode(!1).notePadding(10).type(e).accessors({x:function(e){return y/2},y:function(e){return v(e.date)}}).annotations(n));d3.select("svg.timeline-svg").append("g").attr("class","annotation-group").call(t),d3.selectAll(".anno-article").select(".annotation-note-title").st("fill","#34A29E"),d3.selectAll(".anno-paper").select(".annotation-note-title").st("fill","#ff533d"),d3.selectAll(".connector").st("stroke","#c9c9c9"),d3.selectAll(".note-line").st("stroke","#c9c9c9")}function oe(e){var t=e.map(function(e){return r({},e,{year:+e.formatted_pub_date.split("/")[0],month:+e.formatted_pub_date.split("/")[1],day:+e.formatted_pub_date.split("/")[2],date:new Date(G(e.formatted_pub_date)),yearMonth:"".concat(e.formatted_pub_date.split("/")[0],"-").concat(e.formatted_pub_date.split("/")[1])})}).sort(c.default.sortDatesYearMonth).filter(function(e){return"[]"!==e.keywords&&"Correction"!==e.type_of_material&&""!==e.print_page&&"International Herald Tribune"!==e.source&&"article"===e.type}),d=!0,n=!1,l=void 0;try{for(var a,s=t[Symbol.iterator]();!(d=(a=s.next()).done);d=!0){var i=a.value;delete i.filename,delete i.keywords,delete i.multimedia,delete i.news_desk,delete i.section_name,delete i.snippet,delete i.subsection,delete i.type_of_material,delete i.uri,delete i.word_count,delete i.blog,delete i.headline,delete i.print_page,delete i.source,delete i.subsection_name}}catch(o){n=!0,l=o}finally{try{d||null==s.return||s.return()}finally{if(n)throw l}}return t}function re(e){return e.map(function(e){return r({},e,{year:+e.pub_date.split("_")[0],month:+e.pub_date.split("_")[1],date:new Date(X(e.pub_date))})}).filter(function(e){return"aap_cochrane"===e.grouping||"original"===e.grouping})}function ue(){y=E.node().offsetWidth,g=6e3,H.at("width",y).at("height",g),v=d3.scaleTime().domain([new Date(1988,1,1),new Date(2019,10,15)]).range([J.top,g-J.bottom])}function he(){w=d3.select(".pudding-footer"),x=d3.select(".cover-right"),k=d3.select(".cover-left"),E=d3.select("body"),C=E.select(".timeline-box"),H=d3.select("svg.timeline-svg"),I=H.append("g.timeline-g"),S=d3.select(".tooltip"),T=d3.select(".sci-title"),Y=d3.select(".sci-author"),j=d3.select(".sci-body"),M=d3.select(".sci-link"),A=d3.select(".arrow-cover"),P=d3.selectAll(".arrow-intro-text-down"),D=d3.selectAll(".arrow-intro-text-up"),_=d3.selectAll(".end")}function fe(){ce(),(z=I.append("line.time-axis")).st("stroke","#000").st("stroke-width","0.5px").st("opacity",1).at("x1",y/2).at("y1",J.top).at("x2",y/2).at("y2",g-J.bottom),N=I.append("g.timeline-axis"),L=N.append("g.timeline-circle-g"),B=L.selectAll("g.cells").data(d3.voronoi().extent([[-J.left,-J.top],[y+J.right,g+J.top]]).x(function(e){return e.x<y+J.right&&e.x>-J.left?e.x:0}).y(function(e){return e.y<g+J.top&&e.y>-J.top?e.y:0}).polygons(s)).enter(),F=B.append("g.cells"),U=F.append("circle").at("class",function(e){return e.data.type}).at("cx",function(e){return e.data.x}).at("cy",function(e){return e.data.y}).at("r",function(e){return"article"===e.data.type?Q:K}).on("click",function(e){y<600||("article"===e.data.type?window.open(e.data.web_url):window.open(e.data.link))}).on("mousemove",te).on("mouseleave",de).on("click",te),q=N.append("g.timeline-axis-background"),W=N.append("g.timeline-axis-foreground"),q.at("transform","translate(".concat(y/2,",0)")).call(d3.axisLeft(v).ticks(d3.timeYear)),W.at("transform","translate(".concat(y/2,",0)")).call(d3.axisLeft(v).ticks(d3.timeYear)),W.selectAll(".tick").select("text").st("fill","#c9c9c9"),N.selectAll("g.tick").st("font-size","16px"),q.selectAll("g.tick").selectAll("text").st("stroke","#282828").st("stroke-width","2"),ee(),C.classed("hidden",!0),w.classed("hidden",!0),y<600&&(I.on("click",de),N.on("click",de),q.on("click",de),W.on("click",de),H.on("click",de),d3.selectAll(".annotation").on("click",de))}function pe(){return he(),new Promise(function(e,i){var o,r=[];r.push("assets/data/nyt_vaccine_autism_monthly_v2.csv"),r.push("assets/data/science_track_combined.csv"),(o=d3).loadData.apply(o,r.concat([function(e,o){e?i(e):(t=o[0],l=o[1],d=oe(t),a=re(l),s=d.concat(a).sort(c.default.sortDates),ue(),se(),(n=ie(s)).forEach(function(e,t){var d=s.filter(function(t){return t.date===e.data.date})[0],n=null;if(d){var l=t%2?-1:1;n=d.x;var a="article"===d.type?l*Q+n:l*K+n;e.x=a}else e.x=n}),fe())}]))})}window.onscroll=function(){!0===Z.classed("is-visible")&&Z.classed("is-visible",!1)};var me={init:pe,resize:ue};exports.default=me;
},{"./sorting":"i2Ry"}],"v9Q8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Women’s Pockets are Inferior"}],t=null;function n(e,t){var n=document.getElementsByTagName("script")[0],o=document.createElement("script");return o.src=e,o.async=!0,n.parentNode.insertBefore(o,n),t&&"function"==typeof t&&(o.onload=t),o}function o(t){var n=new XMLHttpRequest,o=Date.now(),r="https://pudding.cool/assets/data/stories.json?v=".concat(o);n.open("GET",r,!0),n.onload=function(){if(n.status>=200&&n.status<400){var o=JSON.parse(n.responseText);t(o)}else t(e)},n.onerror=function(){return t(e)},n.send()}function r(e){return"\n\t<a class='footer-recirc__article' href='https://pudding.cool/".concat(e.url,"' target='_blank'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/").concat(e.image,".jpg' alt='").concat(e.hed,"'>\n\t\t<p class='article__headline'>").concat(e.hed,"</p>\n\t</a>\n\t")}function a(){var e=window.location.href,n=t.filter(function(t){return!e.includes(t.url)}).slice(0,4).map(r).join("");d3.select(".pudding-footer .footer-recirc__articles").html(n)}function s(){var e,t,o,r,a;e=document,t="script",o="facebook-jssdk",a=e.getElementsByTagName(t)[0],e.getElementById(o)||((r=e.createElement(t)).id=o,r.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.7",a.parentNode.insertBefore(r,a)),n("https://platform.twitter.com/widgets.js")}function c(){o(function(e){t=e,a(),s()})}var i={init:c};exports.default=i;
},{}],"epB2":[function(require,module,exports) {
"use strict";var e=l(require("lodash.debounce")),i=l(require("./utils/is-mobile")),s=l(require("./graphic")),t=l(require("./footer"));function l(e){return e&&e.__esModule?e:{default:e}}var d=d3.select("body"),r=0;function a(){var e=d.node().offsetWidth;r!==e&&(r=e,s.default.resize())}function n(){if(d.select("header").classed("is-sticky")){var e=d.select(".header__menu"),i=d.select(".header__toggle");i.on("click",function(){var s=e.classed("is-visible");e.classed("is-visible",!s),i.classed("is-visible",!s)})}}function u(){d.classed("is-mobile",i.default.any()),window.addEventListener("resize",(0,e.default)(a,150)),n(),s.default.init(),t.default.init()}u();
},{"lodash.debounce":"or4r","./utils/is-mobile":"WEtf","./graphic":"TAPd","./footer":"v9Q8"}]},{},["epB2"], null)